{% include 'partials/header.html' %}
<h1>Authors</h1>
<a href="{% url 'library:add'%}"><button>Add author</button></a>
<ol>
    {% for author in authors%}
    <li>{{author.author_name}} 
        <a href="{% url 'library:modify' author.id %}"><button>Modify</button></a>
        <button class="del_a" id={{author.id}}>Delete</button>
    </li>
    {% endfor %}
</ol>
<script>
    $(document).ready(function(){
        $(".del_a").click(deleteAuthor)
        
        function deleteAuthor(e) {
            e.preventDefault();
            id = $(".del_a").attr('id')
            conf = confirm("Do you want to delete this author?")
            if(conf) {
                
                $.ajax({
                    type: 'GET',
                    url: '/home/author/delete/' + id,
                    csrfmiddlewaretoken: '{{ csrf_token }}',
                    success: function() {
                        alert("Author Deleted")
                    }
                })
            } else {
                alert("Action Cancelled")
            }
        }
    })
</script>
{% include 'partials/footer.html' %}